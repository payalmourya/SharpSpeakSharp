<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Storyverse - Live Reader</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-50 font-serif">

  <section class="text-white py-16 mb-10 bg-gradient-to-r from-gray-700 via-gray-900 to-black">
    <div class="container mx-auto px-4 text-center">
      <h1 class="text-5xl font-bold mb-4">üìñ Storyverse Live Reader</h1>
      <p class="text-xl text-gray-200">Read aloud and get instant word-by-word feedback</p>
    </div>
  </section>

  <div class="container mx-auto px-4">
    <h2 class="text-3xl font-bold text-center mb-6 text-gray-700">Interactive Stories</h2>
    <div class="space-y-8" id="storyGrid"></div>
  </div>

<script>
const stories = [
  {
    title: "The Brave Little Fox",
        content: `Once upon a time in a deep forest, there lived a brave little fox named Felix. He wasn‚Äôt the biggest, fastest, or loudest animal in the woods, but everyone knew Felix for his cleverness and kind heart. Felix loved to explore the winding paths between the trees, always stopping to chat with the birds, rabbits, and squirrels. If anyone needed help, he was the first to offer a paw.

One bright spring morning, as Felix trotted along the riverbank collecting wild berries, he heard a panicked cry echoing from downstream. It was soft, almost drowned out by the gurgling of the river. Felix‚Äôs ears perked up, and he darted through the underbrush toward the sound.

To his surprise, he found a bear cub clinging to a slippery rock in the middle of the river. The current was strong, and the poor cub looked terrified. Felix didn‚Äôt waste a second. He ran to the edge of the water and called out, ‚ÄúHold on! I‚Äôll get help!‚Äù

Felix sprinted through the forest, alerting the nearby animals. He found a team of beavers gnawing on a tree, a family of deer grazing in a meadow, and even a wise old owl perched high above. Together, they came up with a plan. The beavers quickly built a sturdy raft from branches and logs. The deer helped pull it to the river, and the owl flew overhead to guide them through the safest route.

With Felix at the front, the animals pushed the raft into the river. Carefully, they navigated the choppy water, paddling toward the stranded cub. Felix spoke softly to the little bear, telling him not to be afraid. When they finally reached him, Felix reached out his paw and helped the cub onto the raft. The animals cheered as they guided it back to shore.

The cub‚Äôs mother, who had been searching frantically, arrived just in time to see her baby safe and sound. She scooped him up and hugged him tightly, tears in her eyes. She turned to Felix and the others. ‚ÄúThank you,‚Äù she said, her voice trembling. ‚ÄúYou saved my child.‚Äù

From that day forward, Felix was no longer just the helpful little fox. He became a hero in the eyes of the entire forest. Animals far and wide came to him for advice, knowing that his courage, quick thinking, and compassion made him someone they could always count on.

And every spring, when the river ran high and the flowers bloomed, the animals would gather by the water and tell the tale of Felix‚Äîthe brave little fox who reminded them that even the smallest among them could do the greatest things.`
      },
      {
        title: "The Moon and the Cat",
        content: `At night, Luna the cat would gaze at the moon and dream of visiting the stars. She lived in a quiet village, nestled between hills and rivers, where rooftops were her favorite playground. Every evening, after the humans turned off their lights and the world grew still, Luna would climb to the highest point of the tallest house and sit silently under the sky.

She meowed softly, not for attention, but as if whispering her thoughts to the stars above. She imagined the moon was listening‚Äîthat it understood her yearning for something greater than chimney tops and garden walls. The villagers often spoke of Luna as a peculiar cat, always staring at the heavens as if expecting an answer.

One magical evening, as the air shimmered with the hush of twilight, Luna noticed something strange. A silver glow began to form in the sky, brighter than usual, and then the moonlight slowly bent downward. A staircase‚Äîmade entirely of light‚Äîdescended gently from the moon, resting just a paw‚Äôs reach from where she sat.

With barely a pause, Luna placed one paw on the glowing step. To her surprise, it held her weight as gently as a breeze. Higher and higher she climbed, the rooftops fading into clouds, the stars blinking a little closer with each step. When she reached the moon, it wasn't cold or distant like she imagined. It was warm, like a lullaby sung by the night itself.

The stars welcomed her with twinkles and laughter, swirling gently around as if they‚Äôd known her all along. Luna leapt and twirled, her paws skipping between constellations. She chased comets and rode moonbeams like ribbons of silk. Time seemed to pause in that celestial playground, where dreams and reality blended.

Eventually, the moon whispered it was time to return. Luna descended the staircase of light, the stars waving farewell until the next night. When she touched the rooftop once more, dawn was breaking, and the staircase melted into the sky like a dream forgotten.

But Luna never forgot.

Each night after, the moonlight would shimmer just enough for her to climb again. The villagers sometimes saw her perched in the same place, her eyes brighter than any candle, her purr echoing like a secret melody in the dark. They didn‚Äôt know where she went, but they knew she was special.

And so, Luna the cat became a legend. Some say if you watch closely on the clearest nights, you might see a glowing paw print on the moon‚Äîor hear a soft meow among the stars.`
      },
      {
        title: "Timmy‚Äôs Talking Shoes",
        content: `Timmy was an ordinary boy who loved to play outside and explore the neighborhood. But one day, something extraordinary happened‚Äîhe found a pair of old shoes tucked away in his grandmother‚Äôs attic. They were dusty and worn, but when Timmy slipped them on, he heard a tiny voice say, ‚ÄúHey there, Timmy! Ready for an adventure?‚Äù

At first, Timmy thought he was imagining things. But the shoes kept talking, telling jokes, giving advice, and even cheering him on. ‚ÄúYou‚Äôve got this!‚Äù they‚Äôd say whenever he felt nervous. The shoes seemed to know exactly what he needed, and Timmy quickly realized they were magical.

With the talking shoes on, Timmy felt braver. They helped him make new friends at school by suggesting things to say or games to play. One afternoon, as Timmy walked home, the shoes suddenly whispered, ‚ÄúLook! Someone needs our help!‚Äù He followed their guidance and found a lost puppy wandering near a busy street.

The shoes told Timmy to stay calm and gently call the puppy. Step by step, they led Timmy safely across the road and to the puppy‚Äôs collar, where he found a tag with a phone number. Timmy‚Äôs heart filled with joy as he called the owner, who thanked him warmly for finding their beloved pet.

That day, Timmy learned something special: with the right steps, you can always walk into an adventure. The shoes weren‚Äôt just magical‚Äîthey were his new best friends, guiding him through the ups and downs of growing up.

From then on, Timmy and his talking shoes explored parks, made new friends, and helped those in need. Sometimes, the shoes would even tell silly stories that made Timmy laugh so hard, he‚Äôd forget his worries entirely.

And every night, before he went to sleep, Timmy would take off the shoes and whisper, ‚ÄúThanks for the adventure. Can‚Äôt wait to see what‚Äôs next.‚Äù`
      },
{
    title: "The Whispering Wind",
    content: `In the quiet valley of Elden, the wind spoke to those who listened. It carried the soft rustling of the trees, the gentle murmur of the streams, and the distant songs of birds. Young Mira was one of the few who could truly hear its voice. She often sat by the edge of the cliffs, letting the breeze wrap around her as it whispered stories from faraway places.

One crisp autumn morning, the wind‚Äôs whispers grew clearer, almost like a call meant only for her. It guided Mira to a forgotten path that twisted through the thick woods beyond the village. Curious and brave, she followed the invisible thread until she came upon a hidden glen bathed in golden sunlight.

In this secret place, animals of every kind had gathered ‚Äî foxes, rabbits, owls, and deer ‚Äî all quietly sharing secrets and songs that only they knew. Mira felt no fear; instead, she felt honored and welcomed. The wind spoke again, telling her she had been chosen to be its storyteller, a bridge between the wild creatures and the people of Elden.

From that day forward, Mira carried the tales of nature to the village below. She told of the bravery of the foxes, the wisdom of the owls, and the kindness of the deer. Her voice became a thread that tied humans and animals together in trust and friendship.

Mira grew into a beloved figure, known as the voice of the valley. Through her stories, the villagers learned to listen ‚Äî not just with their ears, but with their hearts. And they came to understand that even the wind, with its gentle whispers, had something precious to share.,
        `
    },
{
    title: "Leo and the Paper Planes",
    content: `Leo loved making paper planes more than anything else in the world. His small desk was always covered with sheets of paper, some folded into sleek gliders, others into intricate dart shapes. Each plane had a name, a story, and a special mission. Leo imagined that one day, one of his planes would soar far beyond the hills that surrounded his quiet town.

His classmates often teased him. ‚ÄúWhy do you waste your time on paper planes?‚Äù they‚Äôd say. ‚ÄúThey‚Äôll never fly anywhere special.‚Äù But Leo just smiled and kept folding. To him, every crease was a promise, every plane a little hope.

One chilly, blustery afternoon, with the sky streaked in silver clouds, Leo decided it was time to test his latest creation ‚Äî a bright red plane he called ‚ÄúScarlet Flyer.‚Äù It was the most perfect plane he had ever made, with sharp wings and a smooth body that glinted in the sunlight. He climbed to the very top of the school‚Äôs old clock tower, the highest spot he could find.

The wind whipped around him as he stood there, his heart pounding with excitement. Taking a deep breath, Leo released Scarlet Flyer into the gust. The plane caught the wind just right and lifted into the air. It soared higher and higher, gliding over the rooftops, past the trees, and toward the distant hills.

Leo watched with wide eyes as the little plane disappeared into the clouds, carried by the wind‚Äôs gentle hands. It was a moment he would never forget ‚Äî the moment his dream felt real.

Weeks later, Leo‚Äôs mailbox held a surprising letter. It was from a child in another country, writing to say they had found a bright red paper plane in a field near their home. The letter was filled with wonder and questions: ‚ÄúWho made this plane? What stories does it carry? Where did it come from?‚Äù

Leo‚Äôs smile grew wider than ever. His dream had traveled across miles and borders, carried by the wind and touched by the hands of a new friend far away. Through his paper planes, he realized that even the smallest things could connect people in the biggest ways.

And so, Leo continued to fold and dream, knowing that somewhere out there, another plane was waiting to carry his stories beyond the horizon.`
    },
{
    title: `Leo loved making paper planes more than anything else in the world. His small desk was always covered with sheets of paper, some folded into sleek gliders, others into intricate dart shapes. Each plane had a name, a story, and a special mission. Leo imagined that one day, one of his planes would soar far beyond the hills that surrounded his quiet town.

His classmates often teased him. ‚ÄúWhy do you waste your time on paper planes?‚Äù they‚Äôd say. ‚ÄúThey‚Äôll never fly anywhere special.‚Äù But Leo just smiled and kept folding. To him, every crease was a promise, every plane a little hope.

One chilly, blustery afternoon, with the sky streaked in silver clouds, Leo decided it was time to test his latest creation ‚Äî a bright red plane he called ‚ÄúScarlet Flyer.‚Äù It was the most perfect plane he had ever made, with sharp wings and a smooth body that glinted in the sunlight. He climbed to the very top of the school‚Äôs old clock tower, the highest spot he could find.

The wind whipped around him as he stood there, his heart pounding with excitement. Taking a deep breath, Leo released Scarlet Flyer into the gust. The plane caught the wind just right and lifted into the air. It soared higher and higher, gliding over the rooftops, past the trees, and toward the distant hills.

Leo watched with wide eyes as the little plane disappeared into the clouds, carried by the wind‚Äôs gentle hands. It was a moment he would never forget ‚Äî the moment his dream felt real.

Weeks later, Leo‚Äôs mailbox held a surprising letter. It was from a child in another country, writing to say they had found a bright red paper plane in a field near their home. The letter was filled with wonder and questions: ‚ÄúWho made this plane? What stories does it carry? Where did it come from?‚Äù

Leo‚Äôs smile grew wider than ever. His dream had traveled across miles and borders, carried by the wind and touched by the hands of a new friend far away. Through his paper planes, he realized that even the smallest things could connect people in the biggest ways.

And so, Leo continued to fold and dream, knowing that somewhere out there, another plane was waiting to carry his stories beyond the horizon.`
    },
{
    title:"Marvin and the Moon Mail",
    content:`Marvin was the only mailman in the village of Starlit Hollow, a small, cozy place nestled between rolling hills and whispering forests. But Marvin had a secret‚Äîbesides delivering letters to every doorstep, he was the village‚Äôs special messenger to the moon.

Every full moon, villagers would gather in the town square, their faces glowing under the soft silver light. They brought with them letters written on delicate parchment, filled with their deepest hopes, dreams, and sometimes fears. Children wrote wishes for new toys and adventures, while adults penned prayers for health, love, and peace.

One chilly evening, little Elsie tugged at Marvin‚Äôs coat. ‚ÄúWill you send my letter to the moon, Mr. Marvin? I want the stars to hear my wish.‚Äù

Marvin smiled kindly, kneeling to her eye level. ‚ÄúI promise, Elsie. The moon listens to every word.‚Äù

With care, Marvin gathered the letters and tucked them into his satchel. He headed toward Star Peak, the tallest hill in the village, where the wind was always just right. At the summit, he unpacked his special kite ‚Äî woven from silver threads gifted by the village elder and shimmering softly in the moonlight.

‚ÄúReady for your journey,‚Äù Marvin whispered to the kite as he tied the letters to its frame.

The kite soared as Marvin released it into the night, the wind catching it perfectly and carrying it higher and higher until it disappeared into the glowing moonbeam.

But this night was different.

As Marvin prepared to head home, he felt a soft flutter inside his satchel. Reaching in, he found a small letter, glowing with silver dust. Carefully, he unrolled it, watching the sparkling words appear:

Thank you for the messages. We hear your hopes and send our light in return.

The next morning, Marvin showed the letter to the villagers. Excitement filled the air as they realized the moon truly listened.

From then on, moon replies came regularly. For birthdays, the letters sparkled with joy. At weddings, they shimmered with blessings. And in moments of sorrow, they glowed softly, offering comfort and hope.

One evening, the village elder said, ‚ÄúMarvin, you carry more than letters. You carry the heart of Starlit Hollow to the stars.‚Äù

Marvin smiled beneath his lantern‚Äôs warm glow. ‚ÄúAnd the moon brings its light back to us.‚Äù

Children dreamed of helping Marvin someday, and villagers whispered stories of his magical night journeys. Through his quiet work, Marvin reminded everyone that hope could reach beyond the stars ‚Äî and sometimes, even the moon could be a friend.`
    },
{
    title: "Nia and the Clockmaker‚Äôs Secret",
    content: `In the heart of the town stood an ancient clock tower, its hands always perfectly on time. The tower‚Äôs chimes rang out every hour, a comforting rhythm that marked the lives of everyone below. No one knew exactly how it stayed so precise, but it had never missed a beat in over a hundred years.

Nia, a curious and bright apprentice, worked alongside the old clockmaker, Mr. Thorne. He was a quiet man, rarely speaking and never leaving the tower. Nia admired him and was eager to learn the secrets of the great clock, though the old man guarded his knowledge closely.

One stormy evening, as thunder roared and lightning split the sky, a fierce bolt struck the clock tower. The great clock‚Äôs hands froze‚Äîsilent and still for the first time in a century. The town fell into an uneasy hush, feeling as if time itself had paused.

Determined, Nia ventured into the tower‚Äôs shadowed interior. The usual hum of ticking was gone, replaced by a deep silence. She climbed the narrow spiral stairs until she reached a hidden door she had never seen before. With trembling hands, she pushed it open.

Inside was a secret room filled with countless gears and cogs, shimmering faintly with a strange glow. But these weren‚Äôt ordinary gears ‚Äî they sparkled with stardust and seemed alive, as if powered by memories rather than mechanics. The air was thick with whispers of voices and laughter, like echoes trapped inside the very heart of the clock.

Suddenly, Mr. Thorne appeared behind her. ‚ÄúThis tower doesn‚Äôt just track time,‚Äù he said softly. ‚ÄúIt preserves the stories of every moment, every tick holds a memory from lives long past.‚Äù

He explained how the clock‚Äôs magic worked ‚Äî each rotation carried fragments of joy, sorrow, love, and hope. It was a living archive of the town‚Äôs spirit, a keeper of history woven through seconds and minutes.

Nia listened closely as the clock began to stir again. As the gears turned, she heard the whispers grow louder ‚Äî stories of old lovers meeting beneath the tower, children‚Äôs laughter echoing through the square, celebrations, and quiet tears.

From that day forward, Nia understood the true power of time. She vowed to protect the clock and continue Mr. Thorne‚Äôs legacy, not just as a keeper of hours but as a guardian of the town‚Äôs memories.

The clock never missed a beat again, and Nia became known as the keeper of time and tales, forever listening to the stories the ancient clock whispered on the wind.`
    }
    ];


function renderStories() {
  const grid = document.getElementById("storyGrid");

  stories.forEach((story, index) => {
    const div = document.createElement("div");
    div.className = "bg-white p-6 rounded shadow border";

    const fullText = story.content.trim();
    const preview = fullText.split(/\s+/).slice(0, 20).join(" ") + "...";

    div.innerHTML = `
      <h3 class="text-xl font-bold text-gray-800 mb-2">${story.title}</h3>
      <p class="text-gray-500 mb-2">Click the button and read the story aloud:</p>

      <div id="text-preview-${index}" class="text-gray-700 text-base leading-relaxed mb-2">${preview}</div>
      <div id="text-full-${index}" class="text-gray-700 text-base leading-relaxed mb-2 hidden">
        ${fullText
          .trim()
          .split(/\s+/)
          .map((w, i) => `<span id="w-${index}-${i}" class="px-1">${w}</span>`)
          .join(" ")}
      </div>

      <button onclick="toggleStory(${index})" id="toggle-btn-${index}" class="text-blue-600 hover:underline mb-4">Read More</button><br/>

      <button onclick="startLiveRecognition(${index})" class="mt-2 bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-800">üé§ Start Reading</button>
      <p id="status-${index}" class="mt-2 text-sm text-gray-500 italic"></p>
    `;

    grid.appendChild(div);
  });
}

function toggleStory(index) {
  const previewEl = document.getElementById(`text-preview-${index}`);
  const fullEl = document.getElementById(`text-full-${index}`);
  const toggleBtn = document.getElementById(`toggle-btn-${index}`);

  if (fullEl.classList.contains("hidden")) {
    previewEl.classList.add("hidden");
    fullEl.classList.remove("hidden");
    toggleBtn.textContent = "Show Less";
  } else {
    previewEl.classList.remove("hidden");
    fullEl.classList.add("hidden");
    toggleBtn.textContent = "Read More";
  }
}

const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
const recognition = new SpeechRecognition();
recognition.lang = 'en-US';
recognition.continuous = true;
recognition.interimResults = true;

let activeIndex = 0;
let originalWords = [];
let lastTranscript = "";

function startLiveRecognition(index) {
  activeIndex = index;
  lastTranscript = "";
  originalWords = stories[index].content.toLowerCase().replace(/[^\w\s]/g, '').split(/\s+/);

  // Reset all word styles
  originalWords.forEach((_, i) => {
    const span = document.getElementById(`w-${index}-${i}`);
    if (span) span.className = "px-1";
  });

  document.getElementById(`status-${index}`).textContent = "üéô Listening...";
  recognition.start();
}

recognition.onresult = function(event) {
  const transcript = Array.from(event.results)
    .map(result => result[0].transcript)
    .join('')
    .toLowerCase()
    .replace(/[^\w\s]/g, '')
    .trim();

  if (transcript === lastTranscript) return;
  lastTranscript = transcript;

  const spokenWords = transcript.split(/\s+/);
  const statusEl = document.getElementById(`status-${activeIndex}`);

  // Highlight matches word-by-word
  originalWords.forEach((word, i) => {
    const span = document.getElementById(`w-${activeIndex}-${i}`);
    if (!span) return;

    if (spokenWords.includes(word)) {
      span.className = "bg-green-200 text-green-900 font-semibold rounded px-1";
    } else {
      span.className = "bg-red-200 text-red-900 rounded px-1";
    }
  });

  statusEl.textContent = `‚úÖ Recognized ${spokenWords.length} words`;
};

recognition.onerror = function(e) {
  document.getElementById(`status-${activeIndex}`).textContent = `‚ùå Error: ${e.error}`;
};

document.addEventListener("DOMContentLoaded", renderStories);
</script>

</body>
</html>
